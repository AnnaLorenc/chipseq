# The main entry point of workflow.
# After configuring, running snakemake -n in a clone of this repository should successfully execute a dry-run of the workflow.
from pathlib import Path
import glob

include: "rules/common.smk"
include: "rules/qc.smk"

reads_names = set()
path = glob.glob(config["reads_dir"]+"/*.fq")
for p in path:
    reads_names.add(Path(p).stem)

def all_input(wildcards):

    wanted_input = []

    wanted_input.extend(
        expand (
            [
                "results/qc/fastqc/{filename}.fq_fastqc.zip",
                "results/qc/fastqc/reports/{filename}.fq.html"
            ],
            filename=reads_names
        )
    )

    return wanted_input

rule all:
    input: all_input
